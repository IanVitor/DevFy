<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <audio  id="audio"></audio>

  <button src="" onclick="tocar()">Tocar</button>
  <button onclick="pausar()">Pausar</button>
  <button onclick="proxima()">Proxima</button>

  <div class="bar-progres">
    <div class="current-progres"></div>
  </div>

  <script>
    const audio = document.querySelector("#audio")
    const progressContainer = document.querySelector(".bar-progres")
    const currentProgress = document.querySelector(".current-progres")


    const audiotag = ['src/audio.mp3',
                      'src/audio2.mp3']

    var i = 0
    const slideLength = audiotag.length

    

    function tocar () {
      audio.play()
    }
    function pausar () {
      audio.pause()
    }

    function updateBar(){
      const barWidth = audio.currentTime/108*100
      currentProgress.style.setProperty('--progress', `${barWidth}%`)

    }

    function proxima () {
      audio.src = audiotag[i]
      if(i < slideLength-1){
        i++
      }else{
        i = 0;
      }
      tocar()
      
    }
    
    progressContainer.addEventListener('click', JumpTo);
    audio.addEventListener('timeupdate', updateBar);

    
    function JumpTo (event){
      const width = progressContainer.clientWidth;
      const clickPosition = event.offsetX;
      const jumpToTime = (clickPosition/width)* 108;
      audio.currentTime = jumpToTime;
    }

  </script>
</body>
</html>